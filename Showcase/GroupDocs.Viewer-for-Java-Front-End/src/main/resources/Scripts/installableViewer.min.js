(function(a){a.widget("ui.groupdocsViewer",{_viewModel:null,options:{enableViewerInit:true,supportTextSelection:true,resourcePrefix:""},_create:function(){a.extend(this.options,{element:this.element,applicationPath:a.ui.groupdocsViewer.prototype.applicationPath,widgetInstance:this});this._viewModel=this.getViewModel()},getViewModel:function(){if(this._viewModel==null)this._viewModel=this._createViewModel();return this._viewModel},_createViewModel:function(){return new window.groupdocs.groupdocsViewerViewModel(this.options)},on:function(a,b){this.element.on(a,b)},off:function(a,b){this.element.off(a,b)},setWidth:function(a){this._viewModel.setWidth(a)},setHeight:function(a){this._viewModel.setHeight(a)},openNextPage:function(){this._viewModel.openNextPage()},openPreviousPage:function(){this._viewModel.openPreviousPage()},setPage:function(a){this._viewModel.setPage(a)},openFirstPage:function(){this._viewModel.openFirstPage()},openLastPage:function(){this._viewModel.openLastPage()},showFileBrowser:function(){this._viewModel.showFileBrowser()},setViewerMode:function(a){this._viewModel.setViewerMode(a)},zoomIn:function(){this._viewModel.zoomIn()},zoomOut:function(){this._viewModel.zoomOut()},setZoom:function(a){this._viewModel.setZoom(a)},downloadDocument:function(){this._viewModel.downloadDocument()},printDocument:function(){this._viewModel.printDocument()},searchForward:function(d,c,b,a){this._viewModel.searchForward(d,c,b,a)},searchBackward:function(d,c,b,a){this._viewModel.searchBackward(d,c,b,a)},clearSearchValue:function(){this._viewModel.clearSearchValue()},getDocumentPageCount:function(){return this._viewModel.getDocumentPageCount()},loadDocument:function(a){this._viewModel.loadDocument(a)},rotateCurrentPage:function(a){this._viewModel._rotatePage(a)},setLoadingState:function(a){this._viewModel.setLoadingState(a)},getContentControlDescriptions:function(){return this._viewModel.getContentControlDescriptions()},navigateToContentControl:function(a){this._viewModel.navigateToContentControl(a)},destroy:function(){this._viewModel.destroy()}});if(!window.groupdocs)window.groupdocs={};window.groupdocs.groupdocsViewerViewModel=function(b){a.extend(this,b);this._create(b)};a.extend(window.groupdocs.groupdocsViewerViewModel.prototype,{groupdocsViewerWrapper:null,browserIsInternetExplorer:false,browserIsChrome:false,resizeTimeoutId:null,viewModes:{ScrollMode:1,BookMode:2},viewMode:null,licElement:null,printImageElements:null,_create:function(a){this._model=new b(a);this._init(a)},_init:function(G){var c,d=this.element;this.viewerId=window.groupdocs.viewerId;var b=a.extend({hostUrl:this.applicationPath,handlerUrlSuffix:this._model._portalService._urlSuffix,docViewerId:"docViewer"+this.viewerId},G);this.printImageElements=[];window.groupdocs.viewerId++;var K=false;if(G.enableViewerInit){var f,B=false;if(a.browser.msie){this.browserIsInternetExplorer=true;if(a.browser.version==8||a.browser.version==9){K=true;if(a.browser.version==8)B=true}f=".grpdx input[type='text']::-ms-clear {display: none;}";a("<style>"+f+"</style>").appendTo("head")}var O,mb=window.chrome,nb=window.navigator.vendor,ob=window.navigator.userAgent.indexOf("OPR")>-1;if(!!mb&&nb==="Google Inc."&&ob==false)O=true;this.browserIsChrome=O;var l="grpdx"+b.docViewerId,e=this,t="";if(e.browserIsInternetExplorer&&b.useHtmlBasedEngine){t=" ie";if(B)t+=" ie8"}var U="";if(!b.showHeader)U='style="display: none"';d.each(function(){a('<div dir="ltr" class="groupdocs_viewer_wrapper grpdx '+l+'"><div class="viewer_header header_sidescroll" '+U+'>   <div class="viewer_header_wrapper">      <a class="btnOpen new_head_tools_btn h_t_i_browser" data-tooltip="Open File" data-localize-tooltip="OpenFile"></a>      <div name="printAndDownloadToolbar" class="new_head_tools_wrapper left">          <a class="new_head_tools_btn h_t_i_download btn_download" data-tooltip="Download" data-localize-tooltip="Download"></a>          <a class="new_head_tools_btn h_t_i_print print_button" data-tooltip="Print" data-localize-tooltip="Print"></a>      </div>      <div class="navigation-bar'+(B?" ie8":"")+'">      </div>      <div class="new_head_tools_wrapper zoom_wrappper">      </div>      <div class="new_head_tools_dropdown_wrapper viewTypeMenu">\t\t\t<a class="new_head_tools_btn head_tool_dropdown_btn h_t_i_singlepage" data-bind="click: toggleDropDownMenu" href="#" data-tooltip="View Mode" data-localize-tooltip="ViewMode"></a>\t\t\t<ul class="dropdown-menu head_tool_dropdown" style="display: none;" data-bind="style: {display: (dropDownMenuIsVisible() ? \'block\' : \'none\')}">\t\t\t\t<li style="display: inline">\t\t\t\t\t<a data-bind="click: openScrollView" href="#">\t\t\t\t\t\t<span class="h_t_d_i_scroll"></span>\t\t\t\t\t\t<p data-localize="ScrollView">Scroll View</p>\t\t\t\t\t</a>\t\t\t\t</li>\t\t\t\t<li style="display: inline" name="openDoublePageFlipViewMenuItem">\t\t\t\t\t<a data-bind="click: openDoublePageFlipView" href="#">\t\t\t\t\t\t<span class="h_t_d_i_double"></span>\t\t\t\t\t\t<p data-localize="BookMode">Double Page Flip</p>\t\t\t\t\t</a>\t\t\t\t</li>\t\t\t\t<li style="display: inline">\t\t\t\t\t<a data-bind="click: openOnePageInRowView" href="#">\t\t\t\t\t\t<span class="h_t_d_i_scroll"></span>\t\t\t\t\t\t<p data-localize="OnePageInRow">One Page in Row</p>\t\t\t\t\t</a>\t\t\t\t</li>\t\t\t\t<li style="display: inline">\t\t\t\t\t<a data-bind="click: openTwoPagesInRowView" href="#">\t\t\t\t\t\t<span class="h_t_d_i_double"></span>\t\t\t\t\t\t<p data-localize="TwoPagesInRow">Two Pages in Row</p>\t\t\t\t\t</a>\t\t\t\t</li>\t\t\t\t<li style="display: inline">\t\t\t\t\t<a data-bind="click: openCoverThenTwoPagesInRowView" href="#">\t\t\t\t\t\t<span class="h_t_d_i_double"></span>\t\t\t\t\t\t<p data-localize="CoverThenTwoPagesInRow">Cover then Two Pages in Row</p>\t\t\t\t\t</a>\t\t\t\t</li>\t\t\t</ul>\t\t</div>      <div name="search_wrapper" class="new_head_tools_wrapper" data-bind="visible:visible">      </div>'+(b.supportPageRotation?'<div class="new_head_tools_wrapper">      <a name="rotateClockwise" class="h_t_i_rotatecl new_head_tools_btn" data-tooltip="Rotate Clockwise" data-localize-tooltip="RotateClockwise"></a>      <a name="rotateCounterClockwise" class="h_t_i_rotatecon new_head_tools_btn" data-tooltip="Rotate Counter-Clockwise" data-localize-tooltip="RotateCounterClockwise"></a></div>':"")+'   </div></div><div class="fileOpenDialogWrapper" style="display: none"></div><div class="viewer_mainwrapper '+t+'">   <div id='+b.docViewerId+' class="doc_viewer" data-bind="event: { scroll: function(item, e) { this.ScrollDocView(item, e); }, scrollstop: function(item, e) { this.ScrollDocViewEnd(item, e);e.returnValue = false;return true; } }">   </div>   <div class="doc_viewer_wrapper_page_flip" style="overflow: auto; top: -50000px; position: absolute;height: 100%">   </div>'+(b.showThumbnails?'   <a class="thumbs_btn" href="#"></a>':"")+'</div><div name="jGDerror" class="modal_dialog_wrapper jerrorwrapper">   <div class="modal_dialog_overlay">       &nbsp;   </div>   <div class="modal_dialog_content_wrapper">       <div class="modal_dialog_header">          Error       </div>       <div class="modal_dialog_download_link">Download file</div>       <div class="modal_dialog_content">       </div>   </div></div><div name="messageDialog" class="modal_dialog_content_wrapper modal_progressbar" style="display:none">   <a name="minimizeButton" class="icon_minimize" href="#">&ndash;</a>   <a name="maximizeButton" class="icon_maximize" href="#">+</a>   <div class="modal_dialog_header">      <span name="alwaysVisibleTitle">Printing </span>      <span name="visibleWhenMinimizedTitle" class="percent">0%</span>   </div>   <div class="modal_dialog_content">      <p data-localize="PreparingPages" name="message">Preparing the pages</p>      <div class="progressbar">      <div style="width: 50%" class="progress"></div></div>   </div></div><div name="messageDialogPdf" class="modal_dialog_content_wrapper modal_progressbar" style="display:none">   <a name="minimizeButtonPdf" class="icon_minimize" href="#">&ndash;</a>   <a name="maximizeButtonPdf" class="icon_maximize" href="#">+</a>   <div class="modal_dialog_header">      <span name="alwaysVisibleTitlePdf">Printing </span>   </div>   <div class="modal_dialog_content">      <p data-localize="PreparingPages" name="messagePdf">Preparing the pages</p>   </div></div></div>').appendTo(a(this))})}this.groupdocsViewerWrapper=c=d.find(".groupdocs_viewer_wrapper");var C=this.viewerHeader=c.find(".viewer_header"),m=this.viewerMainWrapper=c.find(".viewer_mainwrapper");if(!b.showHeader){C.height(0);m.css("top","0")}if(!G.enableViewerInit)return;if(b.filePath=="")b.openThumbnails=false;var M="#"+b.docViewerId,i=a(M),S=c.find("[name='search_wrapper']");if(b.useHtmlBasedEngine){C.find("li[name='openDoublePageFlipViewMenuItem']").hide();if(!b.supportTextSelection){f="."+l+" .html_pages_container{-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}";a("<style>"+f+"</style>").appendTo("head");if(this.browserIsInternetExplorer)i.on("selectstart",function(a){a.preventDefault();return true})}b.supportPageReordering=false}var s,D;if(b.width)s=b.width;else s=d.width();c.width(s);if(b.height)D=b.height;else D=d.height();c.height(D);var p=null;if(!b.useHtmlBasedEngine){p=c.find("[name='selection-content']");if(p.length==0)p=a("<textarea readonly='readonly' rows='1' cols='1' name='selection-content'></textarea>'").appendTo(c)}var W=c.find("[name='jGDerror']");W.find(".modal_dialog_overlay").click(function(){W.hide()});var x=c.find(".navigation-bar"),A=c.find(".zoom_wrappper"),I=c.find(".doc_viewer_wrapper_page_flip"),v=this.fileOpenDialogWrapper=c.find(".fileOpenDialogWrapper");if(!b.supportTextSelection){var Z=M+" .ui-selectable-helper {display: none;visibility: hidden}";a("<style>"+Z+"</style>").appendTo("head")}var w;if(b.thumbnailsContainerWidth){var cb=203,Y=150,X=187,P=this.getScrollbarWidth(),u=Math.round(b.thumbnailsContainerWidth),V=(cb-P)/(u-P);w=Math.round(Y/V);var ab=Math.round(X/V);f="div.thumbnailsContainer{width:"+u+"px}";f+="div.thumbnailsContainer ul li img{width:"+w+"px}";f+="div.thumbnailsContainer ul li{min-width:"+ab+"px}";f+=".thumbs_btn_slide{left:"+(u+2)+"px}";a("<style>"+f+"</style>").appendTo("head")}f="";if(b.searchHighlightColor)f+="."+l+" .search_highlight_html, ."+l+" .search-highlight {background-color:"+b.searchHighlightColor+"; fill:"+b.searchHighlightColor+"}";if(b.currentSearchHighlightColor)f+=".grpdx."+l+" .current_search_highlight {background-color:"+b.currentSearchHighlightColor+"; fill:"+b.currentSearchHighlightColor+"}";if(b.useEmScaling)f+=".grpdx."+l+" .html_page_contents {transform-origin:initial}";f&&a("<style>"+f+"</style>").appendTo("head");function k(){e._localizeElements()}i.bind("onHtmlCreated",k);x.bind("onHtmlCreated",k);A.bind("onHtmlCreated",k);I.bind("onHtmlCreated",k);v.bind("onHtmlCreated",k);var kb={createHtml:true,viewerElement:i,useCaseSensitiveSearch:b.useCaseSensitiveSearch,searchForSeparateWords:b.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExactPhrases:b.treatPhrasesInDoubleQuotesAsExactPhrases,useHtmlBasedEngine:b.useHtmlBasedEngine,searchIsVisible:b.showSearch,useRtl:b.useRtl,useAccentInsensitiveSearch:b.useAccentInsensitiveSearch,useVirtualScrolling:b.useVirtualScrolling},y;if(b.useHtmlBasedEngine)y=20;else y=b.quality;var gb={createHtml:true,thumbnailWidth:w,quality:y,useHtmlBasedEngine:b.useHtmlBasedEngine,useHtmlThumbnails:b.useHtmlThumbnails,useInnerThumbnails:b.useInnerThumbnails,supportPageReordering:b.supportPageReordering,use_pdf:b.supportTextSelection?"true":"false",ignoreDocumentAbsence:b.ignoreDocumentAbsence,supportPageRotation:b.supportPageRotation,openThumbnails:b.openThumbnails,instanceIdToken:b.instanceIdToken,locale:b.locale,_mode:"webComponent"},F;if(b.showThumbnails)F=m;else F=null;var lb={watermarkText:b.watermarkText,watermarkColor:b.watermarkColor,watermarkPosition:b.watermarkPosition,watermarkWidth:b.watermarkWidth,preventTouchEventsBubbling:b.preventTouchEventsBubbling,searchForSeparateWords:b.searchForSeparateWords,treatPhrasesInDoubleQuotesAsExact:b.treatPhrasesInDoubleQuotesAsExact,usePngImagesForHtmlBasedEngine:b.usePngImagesForHtmlBasedEngine,alwaysOnePageInRow:b.showOnePageInRow||b.viewerStyle==window.groupdocs.OnePageInRow,onlyShrinkLargePages:b.onlyShrinkLargePages,loadAllPagesOnSearch:b.loadAllPagesOnSearch,useEmScaling:b.useEmScaling,convertWordDocumentsCompletely:b.convertWordDocumentsCompletely,ignoreDocumentAbsence:b.ignoreDocumentAbsence,usePdf:b.supportTextSelection,preloadPagesOnBrowserSide:b.preloadPagesOnBrowserSide,supportPageRotation:b.supportPageRotation,useAccentInsensitiveSearch:b.useAccentInsensitiveSearch,useRtl:b.useRtl,viewerLayout:b.viewerStyle,useVirtualScrolling:b.useVirtualScrolling,supportListOfContentControls:b.supportListOfContentControls,supportListOfBookmarks:b.supportListOfBookmarks,embedImagesIntoHtmlForWordFiles:b.embedImagesIntoHtmlForWordFiles,instanceIdToken:b.instanceIdToken,browserIsIE9OrLess:K,locale:b.locale,passwordForOpening:b.passwordForOpening,saveFontsInAllFormats:b.saveFontsInAllFormats,downloadButtonMode:b.downloadButtonMode,allowDocumentDownloadingOnFailure:b.allowDocumentDownloadingOnFailure},hb="onMenuClicked",E=c.find(".viewTypeMenu"),n={dropDownMenuIsVisible:ko.observable(false),dropDownMenuClicked:false,openScrollView:function(){e.setMultiplePagesInRowLayout()},openDoublePageFlipView:function(){e.openDoublePageFlipView()},openOnePageInRowView:function(){e.openOnePageInRowView()},openTwoPagesInRowView:function(){e.openTwoPagesInRowView()},openCoverThenTwoPagesInRowView:function(){e.openCoverThenTwoPagesInRowView()},showDropDownMenu:function(a){this.dropDownMenuIsVisible(a)},toggleDropDownMenu:function(b,a){this.dropDownMenuIsVisible(!this.dropDownMenuIsVisible());this.dropDownMenuClicked=true;E.trigger(hb);a.stopPropagation()}},T=this.viewerAdapter=new DocViewerAdapter({fileId:b.filePath,fileVersion:"0",quality:b.quality,use_pdf:b.supportTextSelection?"true":"false",docSpace:i,_mode:"webComponent",createHtml:true,initialZoom:b.initialZoom,viewerWidth:s,viewerHeight:m.height(),docViewerId:b.docViewerId,zoomToFitWidth:b.zoomToFitWidth,zoomToFitHeight:b.zoomToFitHeight,navigation:x,navigationOptions:{createHtml:true},thumbnails:F,thumbnailsOptions:gb,zooming:A,zoomingOptions:{createHtml:true},search:S,searchOptions:kb,preloadPagesCount:b.preloadPagesCount,docSpacePageFlip:b.useHtmlBasedEngine||b.viewerStyle==this.viewModes.ScrollMode&&!b.showViewerStyleControl?null:I,usePageNumberInUrlHash:false,selectionContent:p,imageHorizontalMargin:14,imageVerticalMargin:14,useJavaScriptDocumentDescription:true,searchPartialWords:true,variableHeightPageSupport:true,textSelectionSynchronousCalculation:false,minimumImageWidth:b.minimumImageWidth,fileDisplayName:b.fileDisplayName,pageContentType:b.useHtmlBasedEngine?"html":"image",searchExactText:b.searchExactText,viewerOptions:lb,viewTypeMenu:E,viewTypeViewModel:n,instanceId:this.viewerId});if(b.showFolderBrowser){var bb={hostUrl:b.hostUrl,userId:b.userId,userKey:b.userKey,fileExplorer:c.find(".file_browser_content"),fileUploader:c.find(".file_browser_toolbar"),resourcePrefix:b.resourcePrefix,urlHashEnabled:false,instanceIdToken:b.instanceIdToken};v.fileOpenDialog(bb);v.find(".popclose").click(function(){e._hideFileOpenDialog()})}k();var r=d.find(".thumbs_btn");b.useInnerThumbnails&&r.hide();function Q(){b.showThumbnails&&b.thumbsImageBase64Encoded!=null&&r.css("background-image","url(data:image/png;base64,"+b.thumbsImageBase64Encoded+")").css("background-position","0 0")}Q();r.click(function(){a(this).toggleClass("thumbs_btn_slide");d.find(".thumbnailsContainer").toggle();if(a.browser.msie){r.css("background-image","");Q()}return false});c.find(".btnOpen").click(function(){e._showFileOpenDialog()});c.find("[name=rotateClockwise]").click(function(){e._rotatePage(90)});c.find("[name=rotateCounterClockwise]").click(function(){e._rotatePage(-90)});c.find(".file_browser_content").bind("fileSelected",function(b,a){e._hideFileOpenDialog();e.fileDisplayName=T.docViewerViewModel.fileDisplayName="";T.docViewerViewModel.loadDocument(a.path)});if(b.showThumbnails&&b.openThumbnails){d.find(".thumbs_btn").addClass("thumbs_btn_slide");d.find(".thumbnailsContainer").css("display","block")}ko.applyBindings(n,E.get(0));a("html").click(function(){e.viewerAdapter.zoomViewModel&&e.viewerAdapter.zoomViewModel.showDropDownMenu(false);n.showDropDownMenu(false)});if(b.backgroundColor){d.find(".groupdocs_viewer_wrapper").css("background-color",b.backgroundColor);C.css("background-color",b.backgroundColor);d.find(".new_head_input").css("background-color",b.backgroundColor);d.find(".new_head_tools_wrapper").css("background-color",b.backgroundColor).css("box-shadow","none");d.find(".thumbs_btn").css("background-color",b.backgroundColor)}d.find(".btnOpen").css("display",b.showFolderBrowser?"":"none");d.find(".navigation-bar").css("display",b.showPaging?"":"none");A.css("display",b.showZoom?"":"none");d.find(".btn_download").css("display",b.showDownload?"":"none");d.find(".print_button").css("display",b.showPrint?"":"none");d.find(".viewTypeMenu").css("display",b.showViewerStyleControl?"":"none");b.showPrint===false&&b.showDownload===false&&d.find("[name='printAndDownloadToolbar']").css("display","none");b.showSearch===false&&S.css("display","none");function R(e,d,f){for(var c=["-moz-","-webkit-",""],a=e+"{",b=0;b<c.length;b++)a+=c[b]+d+":"+f+";";a+="}";return a}var g="";if(b.toolbarButtonsBoxShadowStyle){var L="box-shadow",z=R(".grpdx .new_head_tools_btn",L,b.toolbarButtonsBoxShadowStyle);g+=z;if(b.toolbarButtonsBoxShadowHoverStyle){z=R(".grpdx .new_head_tools_btn:hover",L,b.toolbarButtonsBoxShadowHoverStyle);g+=z}}if(b.thumbnailsContainerBackgroundColor)g+=".grpdx div.thumbnailsContainer{background-color:"+b.thumbnailBackgroundColor+"}\r\n";if(b.toolbarBorderBottomColor)g+=".grpdx .viewer_header{border-bottom-color:"+b.toolbarBorderBottomColor+"}\r\n";if(b.thumbnailsContainerBorderRightColor)g+=".grpdx div.thumbnailsContainer{border-right-color:"+b.thumbnailsContainerBorderRightColor+"}\r\n";if(b.toolbarInputFieldBorderColor)g+=".grpdx .new_head_input{border-color:"+b.toolbarInputFieldBorderColor+"}\r\n";if(b.toolbarButtonBorderColor)g+=".grpdx .new_head_tools_btn{border-color:"+b.toolbarButtonBorderColor+"}\r\n";if(b.useInnerThumbnails)g+=".grpdx #"+b.docViewerId+"{display: inline-block}\r\n";a("<style>"+g+"</style>").appendTo("head");i.bind("onDocumentLoadComplete",function(b,a){e.documentLoadCompleteHandler(a,c,m)});i.bind("onDocumentLoaded",function(b,a){e.documentLoadedHandler(a,c,m)});i.bind("isDocumentSinglePaged.groupdocs",function(b,a){e.documentSinglePagedHandler(a,x)});if(b.viewerStyle==this.viewModes.BookMode)n.openDoublePageFlipView();else this.viewMode=this.viewModes.ScrollMode;var j=c.find("[name='jGDerror']"),J=j.find(".modal_dialog_content"),h=j.find(".modal_dialog_content_wrapper"),db=j.find(".modal_dialog_header"),H=j.find(".modal_dialog_download_link");j.removeClass("jerrorwrapper");var N=c.find(".viewer_mainwrapper"),pb=false;if(!window.jGDError)window.jGDError=[];window.jGDError[this.viewerId]=function(c,k){a(d).trigger("error.groupdocs",c);if(b.enableStandardErrorHandling){c=c.replace(/^[\r\n\s]+|[\r\n\s]+$/g,"");if(!c)c="Sorry, we're unable to perform your request right now. Please try again later.";j.css("height","auto");db.text("Error");if(b.allowDocumentDownloadingOnFailure){var l=jGroupdocs.stringExtensions.trimEnd(b.applicationPath,"/")+"/document-viewer/GetFile"+(b.handlerUrlSuffix||"")+"?path="+k+"&getPdf=false";H.html('<a href="'+l+'" target="_blank">Download original file "'+k+'"</a>')}else H.remove();var e,f;if(c.substring(0,1)=="<"){J.html(c);var i=N.width(),g=N.height();if(i<100)e=i;else e=i-100;if(g<100)f=g;else f=g-100}else J.text(c);if(e!=undefined){h.css("margin-left",-e/2);h.width(e)}f!=undefined&&h.height(f);j.show();h.css("margin-left",-h.width()/2);h.css("margin-top",-h.height()/2)}};var q=this.groupdocsViewerWrapper.find("[name='messageDialog']"),jb=q.find("[name='minimizeButton']"),ib=q.find("[name='maximizeButton']");jb.click(function(){q.addClass("min")});ib.click(function(){q.removeClass("min")});var o=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']"),fb=o.find("[name='minimizeButtonPdf']"),eb=o.find("[name='maximizeButtonPdf']");fb.click(function(){o.addClass("min")});eb.click(function(){o.removeClass("min")});this.resizeHandler()},documentLoadedHandler:function(e,f,g){this.printFrameLoaded=false;var h=a("body"),c="printFrame"+this.viewerId,b=h.children("div.groupdocsPrintFrame[name='"+c+"'],div.groupdocsPrintFrameDeactivated[name='"+c+"']");if(b.length==0){b=a("<div class='groupdocsPrintFrameDeactivated'></div>");b.attr("name",c);b.appendTo(h)}else b.empty();this.printImageElements.length=0;var d=e.page_count;if(!e.lic&&d>3)d=3;for(var i,j=0;j<d;j++){i=a("<img/>").appendTo(b);this.printImageElements.push(i)}if(!e.lic&&f.find(".licBanner").length==0){g.addClass("viewer_mainwrapper_trial");this.licElement=a("<div/>");this.licElement.addClass("banner_trial");!this.showHeader&&this.licElement.css("top","0");var k=this._getLocalizedString("This viewer has been created using an unlicensed version of ","UnlicensedViewer");this.licElement.html(k+" <a href='http://groupdocs.com' target='_blank'>GroupDocs</a> Viewer for .NET ");this.licElement.appendTo(f);!this.showHeader&&g.css("top",this.licElement.height()+"px");this.resizeHandler()}},documentLoadCompleteHandler:function(a,f){var h=this;this.showImageWidth&&alert("Image width: "+a.page_size.Width);this.downloadUrl=a.url;this.pdfDownloadUrl=a.pdfDownloadUrl;this.pdfPrintUrl=a.pdfPrintUrl;this.documentPath=a.guid;var c=f.find(".btn_download"),g=f.find(".print_button");c.unbind();g.unbind();var b;if(this.downloadButtonMode===1)b=false;else{var e;if(this.downloadPdfFile&&typeof this.pdfDownloadUrl!=="undefined")e=this.pdfDownloadUrl;else e=this.downloadUrl;c.attr("href",e);var d;switch(this.downloadButtonMode){case 2:d="_self";break;case 3:d="_blank";break;default:d="_self"}c.attr("target",d);b=true}c.bind({click:function(){h._downloadDocument(b);return b}});g.bind({click:function(){h._printDocument();return false}})},documentSinglePagedHandler:function(b,a){if(this.showPaging)if(b)a.hide();else a.show()},_localizeElements:function(){var b=this;this.localizedStrings!=null&&b.element.find("[data-localize],[data-localize-ph],[data-localize-tooltip]").each(function(){var e=a(this),c=e.attr("data-localize"),d;if(c){d=b.localizedStrings[c];e.text(d)}else{c=e.attr("data-localize-ph");if(c){d=b.localizedStrings[c];e.attr("placeholder",d)}else{c=e.attr("data-localize-tooltip");if(c){d=b.localizedStrings[c];e.attr("data-tooltip",d)}}}})},getScrollbarWidth:function(){var c=null,d=a("<div/>").css("width","100px").css("height","100px").css("overflow","scroll").css("position","absolute").css("top","-9999px"),b=d[0];document.body.appendChild(b);c=b.offsetWidth-b.clientWidth;document.body.removeChild(b);return c},resizeHandler:function(){if(this.showHeader){var d=this.viewerHeader.outerHeight(true),b=0;if(this.licElement)b=this.licElement.height();if(d!=this.viewerMainWrapper.position().top-b){var c=d;if(this.licElement){this.licElement.css("top",c.toString()+"px");c+=b}this.viewerMainWrapper.css("top",c.toString()+"px");if(this.viewMode==this.viewModes.BookMode)this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable();else this.viewerAdapter.docViewerViewModel.reInitSelectable()}}if(this.useInnerThumbnails){var a=0,e=this.viewerAdapter.thumbnailsViewModel;if(e)a=e.getThumbnailsPanelWidth();if(this.viewMode==this.viewModes.BookMode)this.viewerAdapter.docViewerPageFlipViewModel.resizeViewerElement(a);else this.viewerAdapter.docViewerViewModel.resizeViewerElement(a)}else this.viewerAdapter.docViewerViewModel.loadImagesForVisiblePages();this._setFitWidthAndHeightValues()},resizeHandlerWithDelay:function(){this.resizeTimeoutId&&clearTimeout(this.resizeTimeoutId);var a=this;this.resizeTimeoutId=window.setTimeout(function(){a.resizeHandler()},1e3)},setWidth:function(a){this.groupdocsViewerWrapper.width(a);this.resizeHandler();this.resizeHandlerWithDelay()},setHeight:function(a){this.groupdocsViewerWrapper.height(a);this.resizeHandler();this.resizeHandlerWithDelay()},_showFileOpenDialog:function(){var b=this;this.fileOpenDialogWrapper.addClass("in");this.fileOpenDialogWrapper.show();this.backdrop=a('<div class="modal-backdrop fade" />').appendTo(this.groupdocsViewerWrapper),this.backdrop.click(function(){b._hideFileOpenDialog()});this.backdrop.addClass("in")},_hideFileOpenDialog:function(){this.backdrop.removeClass("in");this.backdrop.remove();this.fileOpenDialogWrapper.hide()},_rotatePage:function(a){this.viewerAdapter.docViewerViewModel.rotatePage(a)},openScrollView:function(){var b=this.groupdocsViewerWrapper.find(".doc_viewer"),a=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");a.css("position","absolute");a.css("height","100%");a.hide();b.show();this.viewerAdapter.docViewerViewModel.openCurrentPage();this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.showControls()},setMultiplePagesInRowLayout:function(){this.openScrollView();this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.ScrollMode);this.viewerAdapter.docViewerViewModel.reInitSelectable();this._setFitWidthAndHeightValues();this.viewMode=this.viewModes.ScrollMode},openDoublePageFlipView:function(){if(!this.useHtmlBasedEngine){var b=this.groupdocsViewerWrapper.find(".doc_viewer"),a=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip");a.css("display","inline-block");this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.BookMode);this.viewerAdapter.docViewerPageFlipViewModel.openCurrentPage();a.css("height","");a.css("top","");a.css("position","");b.hide();this.viewMode=this.viewModes.BookMode;this.resizeHandler();this.viewerAdapter.docViewerPageFlipViewModel.reInitSelectable();this._setFitWidthAndHeightValues(true);this.viewerAdapter.search&&this.viewerAdapter.searchViewModel.hideControls()}},openOnePageInRowView:function(){this.openScrollView();this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.OnePageInRow);this.viewerAdapter.docViewerViewModel.reInitSelectable();!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},openTwoPagesInRowView:function(){this.openScrollView();this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.TwoPagesInRow);this.viewerAdapter.docViewerViewModel.reInitSelectable();!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},openCoverThenTwoPagesInRowView:function(){this.openScrollView();this.viewerAdapter.docViewerViewModel.setLayout(window.groupdocs.CoverThenTwoPagesInRow);this.viewerAdapter.docViewerViewModel.reInitSelectable();!this.useHtmlBasedEngine&&this.viewerAdapter.docViewerViewModel.openCurrentPage()},_downloadDocument:function(c){this.element.trigger("onGDViewerDownloadButtonClick");this.element.trigger("downloadButtonClick.groupdocs");if(c)return false;var b=this.downloadUrl;if(this.downloadPdfFile&&typeof this.pdfDownloadUrl!=="undefined")b=this.pdfDownloadUrl;if(this.showDownloadErrorsInPopup)a.fileDownload(b,{failCallback:function(a){window.jGDError(a,this.filePath)},cookieName:self.jqueryFileDownloadCookieName,containerElement:this.groupdocsViewerWrapper});else window.location.href=b;return false},_printDocument:function(){var b=this,e,d;if(this.usePdfPrinting){e=this._getLocalizedString("Printing","Printing");d=this._getLocalizedString("Printing","Printing");this._showMessageDialogPdf(e,d);var p=window.open(this.pdfPrintUrl),h=function(){b._hideMessageDialogPdf()};if(this.browserIsChrome)p.onload=h;else window.setTimeout(h,1e3)}else{var r=navigator.userAgent.toLowerCase(),q=r.indexOf("android")>-1;q&&alert("You seem to use an Android device. Your browser does not support the JavaScript print function.");var j="";if(this.fileDisplayName)j=this.fileDisplayName;var n=this.useHtmlBasedEngine&&!this.useImageBasedPrinting,g=a("body"),f="printFrame"+this.viewerId,c=g.children("div.groupdocsPrintFrame[name='"+f+"'],div.groupdocsPrintFrameDeactivated[name='"+f+"']"),i=g.children("div.groupdocsPrintFrame,div.groupdocsPrintFrameDeactivated").not(c);i.removeClass("groupdocsPrintFrame");i.addClass("groupdocsPrintFrameDeactivated");c.removeClass("groupdocsPrintFrameDeactivated");c.addClass("groupdocsPrintFrame");var m=null,k=null,o=this.watermarkPosition,l=null;if(this.printWithWatermark){m=this.watermarkText;k=this.watermarkColor;l=this.watermarkWidth}if(c.length==0){c=a("<div class='groupdocsPrintFrame'></div>");c.attr("name",f);c.appendTo(g)}if(this.printFrameLoaded)window.print();else{e=this._getLocalizedString("Getting a printable version of the document","GettingPrintableVersionOfDocument");d=this._getLocalizedString("Printing","Printing");this._showMessageDialog(e,d,0);this._model.getPrintableHtml(this.documentPath,n,j,this.quality,this.supportTextSelection,m,k,o,l,this.ignoreDocumentAbsence,this.instanceIdToken,function(l){b._hideMessageDialog();var k,g=l.length,h=b._getLocalizedString("Preparing the pages","PreparingPages");h+=": ";var f=0;b._showMessageDialog(h+f+"/"+g,d,0);for(var m=b.printImageElements.length,e=m;e<g;e++){var i;i=a("<img/>").appendTo(c);b.printImageElements.push(i)}for(e=0;e<b.printImageElements.length;e++){var j;function n(){f++;b._updateMessageDialog(h+f+"/"+g,d,f/g*100);if(f>=g){b._hideMessageDialog();window.print();b.printFrameLoaded=true}}k=l[e];j=b.printImageElements[e];j.load(n).attr("src",k)}},function(){b._hideMessageDialog()},this.locale)}}return false},_showMessageDialog:function(c,d,b){var a=this._updateMessageDialog(c,d,b);a.show()},_updateMessageDialog:function(i,j,d){var a=this.groupdocsViewerWrapper.find("[name='messageDialog']"),h=a.find(".modal_dialog_content p[name='message']");h.text(i);var c=a.find(".modal_dialog_header"),e=c.find("span[name='alwaysVisibleTitle']");e.text(j);var g=a.find(".progress");if(typeof d!="undefined"){var b=Math.round(d)+"%";g.css("width",b);var f=c.find("span[name='visibleWhenMinimizedTitle']");f.text(b)}return a},_hideMessageDialog:function(){var a=this.groupdocsViewerWrapper.find("[name='messageDialog']");a.hide()},_showMessageDialogPdf:function(b,c){var a=this._updateMessageDialogPdf(b,c);a.show()},_updateMessageDialogPdf:function(e,f){var a=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']"),c=a.find(".modal_dialog_content p[name='message']");c.text(e);var d=a.find(".modal_dialog_header"),b=d.find("span[name='alwaysVisibleTitlePdf']");b.text(f);return a},_hideMessageDialogPdf:function(){var a=this.groupdocsViewerWrapper.find("[name='messageDialogPdf']");a.hide()},_getLocalizedString:function(d,c){var b=d;if(this.localizedStrings){var a=this.localizedStrings[c];if(a)b=a}return b},_setFitWidthAndHeightValues:function(e){if(this.viewerAdapter.zooming){var d,c,b,a;if(e){b=this.viewerAdapter.docViewerPageFlipViewModel.getFitWidthZoom();a=this.viewerAdapter.docViewerPageFlipViewModel.getFitHeightZoom()}else{d=this.groupdocsViewerWrapper.width();this.viewerAdapter.docViewerViewModel.setContainerWidth(d);c=this.viewerMainWrapper.height();this.viewerAdapter.docViewerViewModel.setContainerHeight(c);b=this.viewerAdapter.docViewerViewModel.getFitWidthZoom();a=this.viewerAdapter.docViewerViewModel.getFitHeightZoom()}this.viewerAdapter.zoomViewModel.setFitWidthZoom(b);this.viewerAdapter.zoomViewModel.setFitHeightZoom(a)}},openNextPage:function(){this.viewerAdapter.navigationViewModel.down()},openPreviousPage:function(){this.viewerAdapter.navigationViewModel.up()},setPage:function(a){this.viewerAdapter.navigationViewModel.selectPage(a)},openFirstPage:function(){this.viewerAdapter.navigationViewModel.openFirstPage()},openLastPage:function(){this.viewerAdapter.navigationViewModel.openLastPage()},showFileBrowser:function(){this._showFileOpenDialog()},setViewerMode:function(a){switch(a){case window.groupdocs.ScrollMode:this.openScrollView();break;case window.groupdocs.BookMode:this.openDoublePageFlipView();break;case window.groupdocs.OnePageInRow:this.openOnePageInRowView();break;case window.groupdocs.TwoPagesInRow:this.openTwoPagesInRowView();break;case window.groupdocs.CoverThenTwoPagesInRow:this.openCoverThenTwoPagesInRowView()}},zoomIn:function(){this.viewerAdapter.zoomViewModel.zoomIn()},zoomOut:function(){this.viewerAdapter.zoomViewModel.zoomOut()},setZoom:function(b){var a=b;switch(b){case window.groupdocs.FitWidth:a=this.viewerAdapter.zoomViewModel.getFitWidthZoomValue();break;case window.groupdocs.FitHeight:a=this.viewerAdapter.zoomViewModel.getFitHeightZoomValue()}this.viewerAdapter.zoomViewModel.setZoom({value:a})},downloadDocument:function(){this._downloadDocument()},printDocument:function(){this._printDocument()},searchForward:function(a,d,c,b){if(this.viewerAdapter.searchViewModel.searchValue()!=a)this.viewerAdapter.searchViewModel.searched=false;this.viewerAdapter.searchViewModel.searchValue(a);this.viewerAdapter.searchViewModel.findNext(d,c,b)},searchBackward:function(a,d,c,b){if(this.viewerAdapter.searchViewModel.searchValue()!=a)this.viewerAdapter.searchViewModel.searched=false;this.viewerAdapter.searchViewModel.searchValue(a);this.viewerAdapter.searchViewModel.findPrevious(d,c,b)},clearSearchValue:function(){this.viewerAdapter.searchViewModel.clearValue()},getDocumentPageCount:function(){return this.viewerAdapter.docViewerViewModel.pageCount()},loadDocument:function(a){this.viewerAdapter.docViewerViewModel.loadDocument(a)},setLoadingState:function(a){this.viewerAdapter.docViewerViewModel.setLoadingState(a)},getContentControlDescriptions:function(){return this.viewerAdapter.docViewerViewModel.getContentControlDescriptions()},navigateToContentControl:function(a){this.viewerAdapter.docViewerViewModel.navigateToContentControl(a)},destroy:function(){var b=this.groupdocsViewerWrapper.find(".doc_viewer_wrapper_page_flip .pages_container_flip");b.length!=0&&b.turn("is")&&b.turn("destroy");this.groupdocsViewerWrapper.remove();a.Widget.prototype.destroy.call(this.widgetInstance)}});var b=function(b){a.extend(this,b);this._init()};a.extend(b.prototype,{_portalService:null,_init:function(){this._portalService=Container.Resolve("PortalService")},getPrintableHtml:function(j,c,n,l,b,i,f,d,g,a,e,k,h,m){this._portalService.getImageUrlsAsync(null,null,j,null,null,0,null,l,b,null,i,f,d,g,a,c,false,function(a){k.apply(this,[a.data.imageUrls])},function(a){h.apply(this,[a])},e,m)}});a.support.cors=true;if(!jQuery.browser){jQuery.browser={};(function(){jQuery.browser.msie=false;jQuery.browser.version=0;if(navigator.appName=="Microsoft Internet Explorer"){if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1}}else if(navigator.appName=="Netscape"){var b=navigator.userAgent,a=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(a.exec(b)!=null){jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1}}})()}window.groupdocs.ScrollMode=1;window.groupdocs.BookMode=2;window.groupdocs.OnePageInRow=3;window.groupdocs.TwoPagesInRow=4;window.groupdocs.CoverThenTwoPagesInRow=5;window.groupdocs.FitWidth=-1;window.groupdocs.FitHeight=-2;window.groupdocs.viewerId=1})(jQuery);